---
layout:     post   				    # 使用的布局（不需要改）
title:      5.1 ms 				# 标题 
subtitle:    #副标题
date:       2018-04-20				# 时间
author:     Manlin 						# 作者
header-img: img/post-bg-coffee.jpeg 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
- trading
- backtesting
---


```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
```


```python
# initial data
MS = 'MS.xlsx'
df = pd.read_excel(MS).iloc[:,0:2]
df
```




<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Feedback Ratio (within 24hours)</th>
      <th>Number of Issue/Request</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2018-01-17</th>
      <td>0.67</td>
      <td>580</td>
    </tr>
    <tr>
      <th>2018-02-17</th>
      <td>0.63</td>
      <td>560</td>
    </tr>
    <tr>
      <th>2018-03-17</th>
      <td>0.70</td>
      <td>499</td>
    </tr>
    <tr>
      <th>2018-04-17</th>
      <td>0.68</td>
      <td>600</td>
    </tr>
    <tr>
      <th>2018-05-17</th>
      <td>0.69</td>
      <td>579</td>
    </tr>
    <tr>
      <th>2018-06-17</th>
      <td>0.70</td>
      <td>599</td>
    </tr>
    <tr>
      <th>2018-07-17</th>
      <td>0.71</td>
      <td>631</td>
    </tr>
    <tr>
      <th>2018-08-17</th>
      <td>0.72</td>
      <td>620</td>
    </tr>
    <tr>
      <th>2018-09-17</th>
      <td>0.70</td>
      <td>600</td>
    </tr>
    <tr>
      <th>2018-10-17</th>
      <td>0.66</td>
      <td>680</td>
    </tr>
    <tr>
      <th>2018-11-17</th>
      <td>0.74</td>
      <td>577</td>
    </tr>
    <tr>
      <th>2018-12-17</th>
      <td>0.68</td>
      <td>768</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 增加观测值
df['Issue Solved'] =(df.iloc[:,0]*df.iloc[:,1]).round()
df['Issue Unsolved'] = df['Number of Issue/Request'] - df['Issue Solved']
df
```




<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Feedback Ratio (within 24hours)</th>
      <th>Number of Issue/Request</th>
      <th>Issue Solved</th>
      <th>Issue Unsolved</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2018-01-17</th>
      <td>0.67</td>
      <td>580</td>
      <td>389.0</td>
      <td>191.0</td>
    </tr>
    <tr>
      <th>2018-02-17</th>
      <td>0.63</td>
      <td>560</td>
      <td>353.0</td>
      <td>207.0</td>
    </tr>
    <tr>
      <th>2018-03-17</th>
      <td>0.70</td>
      <td>499</td>
      <td>349.0</td>
      <td>150.0</td>
    </tr>
    <tr>
      <th>2018-04-17</th>
      <td>0.68</td>
      <td>600</td>
      <td>408.0</td>
      <td>192.0</td>
    </tr>
    <tr>
      <th>2018-05-17</th>
      <td>0.69</td>
      <td>579</td>
      <td>400.0</td>
      <td>179.0</td>
    </tr>
    <tr>
      <th>2018-06-17</th>
      <td>0.70</td>
      <td>599</td>
      <td>419.0</td>
      <td>180.0</td>
    </tr>
    <tr>
      <th>2018-07-17</th>
      <td>0.71</td>
      <td>631</td>
      <td>448.0</td>
      <td>183.0</td>
    </tr>
    <tr>
      <th>2018-08-17</th>
      <td>0.72</td>
      <td>620</td>
      <td>446.0</td>
      <td>174.0</td>
    </tr>
    <tr>
      <th>2018-09-17</th>
      <td>0.70</td>
      <td>600</td>
      <td>420.0</td>
      <td>180.0</td>
    </tr>
    <tr>
      <th>2018-10-17</th>
      <td>0.66</td>
      <td>680</td>
      <td>449.0</td>
      <td>231.0</td>
    </tr>
    <tr>
      <th>2018-11-17</th>
      <td>0.74</td>
      <td>577</td>
      <td>427.0</td>
      <td>150.0</td>
    </tr>
    <tr>
      <th>2018-12-17</th>
      <td>0.68</td>
      <td>768</td>
      <td>522.0</td>
      <td>246.0</td>
    </tr>
  </tbody>
</table>
</div>




```python
x = df.index
a = df['Issue Unsolved']
b = df['Issue Solved']

plt.bar(x, a, label='Issue Unsolved',width = 15)
plt.bar(x, b, bottom=a, label='Issue Solved',width = 15)
plt.legend()
plt.show()
```


![jpg](https://ws3.sinaimg.cn/large/006tKfTcgy1fqieujw359j30ai070747.jpg)



```python
## 特征一：每个月未解决的问题 数量保持稳定。

var_total = int(np.var(df['Number of Issue/Request']))
var_solved = int(np.var(df['Issue Solved']))
var_unsolved = int(np.var(df['Issue Unsolved']))

print('var_total:', var_total)
print('var_solved:', var_solved)
print('var_unsolved:', var_unsolved)

```

    var_total: 4036
    var_solved: 1981
    var_unsolved: 742



```python
# 特征二：根据issue solved排序，上下半年分界明显，且
ss =df.sort_values(by = 'Issue Solved')
ss
```




<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Feedback Ratio (within 24hours)</th>
      <th>Number of Issue/Request</th>
      <th>Issue Solved</th>
      <th>Issue Unsolved</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2018-03-17</th>
      <td>0.70</td>
      <td>499</td>
      <td>349.0</td>
      <td>150.0</td>
    </tr>
    <tr>
      <th>2018-02-17</th>
      <td>0.63</td>
      <td>560</td>
      <td>353.0</td>
      <td>207.0</td>
    </tr>
    <tr>
      <th>2018-01-17</th>
      <td>0.67</td>
      <td>580</td>
      <td>389.0</td>
      <td>191.0</td>
    </tr>
    <tr>
      <th>2018-05-17</th>
      <td>0.69</td>
      <td>579</td>
      <td>400.0</td>
      <td>179.0</td>
    </tr>
    <tr>
      <th>2018-04-17</th>
      <td>0.68</td>
      <td>600</td>
      <td>408.0</td>
      <td>192.0</td>
    </tr>
    <tr>
      <th>2018-06-17</th>
      <td>0.70</td>
      <td>599</td>
      <td>419.0</td>
      <td>180.0</td>
    </tr>
    <tr>
      <th>2018-09-17</th>
      <td>0.70</td>
      <td>600</td>
      <td>420.0</td>
      <td>180.0</td>
    </tr>
    <tr>
      <th>2018-11-17</th>
      <td>0.74</td>
      <td>577</td>
      <td>427.0</td>
      <td>150.0</td>
    </tr>
    <tr>
      <th>2018-08-17</th>
      <td>0.72</td>
      <td>620</td>
      <td>446.0</td>
      <td>174.0</td>
    </tr>
    <tr>
      <th>2018-07-17</th>
      <td>0.71</td>
      <td>631</td>
      <td>448.0</td>
      <td>183.0</td>
    </tr>
    <tr>
      <th>2018-10-17</th>
      <td>0.66</td>
      <td>680</td>
      <td>449.0</td>
      <td>231.0</td>
    </tr>
    <tr>
      <th>2018-12-17</th>
      <td>0.68</td>
      <td>768</td>
      <td>522.0</td>
      <td>246.0</td>
    </tr>
  </tbody>
</table>
</div>


![jpg](https://ws4.sinaimg.cn/large/006tKfTcgy1fqiew1lv0vj30p50b03zp.jpg)
![jpg](https://ws4.sinaimg.cn/large/006tKfTcgy1fqiewlihknj30rb0943zp.jpg)

```python
# 前提假设：客服人员不变，除去节假日每月工作日基本一样。
# 1.从solve的方差角度，处于压力之下效率比较高，而数据少的月份回复少，从而是否因为压力-效率的原因。
# 2.剩下是不是剩下的问题都是比较难以回答的，所以employee回答不了？

# 记录没有solve问题的原因，看看是因为人手不够，还是因为技术性问题需要更专业的人员？
# 如果客服不够，是否考虑增加官网Q&A（7个常规回答），从而有更多精力可以回复一些更加复杂的问题。
# 如果是因为剩下的问题客服回答不了，是否要给客服提供培训。
```
